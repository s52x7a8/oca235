var analyticsLib=function(w){"use strict";var adobeDataLayerName="analyticsData",debug=!1,debugColor="font-weight: bold; color: red",gtmContainerId,autoTrackState=!0,listClassification=["site.platformdetails","site.applicationdetails","visitor.customerdetails","visitor.elegibility","transaction.details","custom.logintype","custom.surveyscore","custom.whatevervariable"],adobeToGoole={"site.vrsid":"site.channel","site.assessibility":"site.accessibility","site.assessibilitystatus":"site.accessibility","site.activatedpermissions":"site.permissions","site.platform":"site.developmenttype","site.platformdetails.AM":"site.environment","site.platformdetails.VA":"site.environment","site.platformdetails.UA":"site.useragent","site.applicationdetails.AG":"visitor.agencystoreid","visitor.customerid":"visitor.client.idpf","visitor.companyid":"visitor.client.idpjcompany","visitor.companyoperator":"visitor.client.idpjoperator","visitor.customerdetails.TP":"visitor.client.accounttype","visitor.customerdetails.AG":"visitor.client.agency","visitor.customersegment":"visitor.client.commercialsegment","visitor.customerdetails.FF":"visitor.client.declaredincomerange","visitor.customerdetails.LM":"visitor.client.limitusage","visitor.customerdetails.PPC":"visitor.client.loannearduedate","visitor.customerdetails.RA":"visitor.client.occupation","visitor.customerdetails.PERF":"visitor.client.profile","visitor.customerdetails.PP":"visitor.client.rewardsprogram","visitor.customerdetails.SCR":"visitor.client.score","visitor.customerdetails.EST":"visitor.client.stars","visitor.customerdetails.CTT":"visitor.client.titularitycode","visitor.customerdetails.SE":"visitor.client.type","visitor.elegibility.PA":"visitor.client.elegibility","visitor.storeid":"visitor.agencystoreid","transaction.details.CTB":"transaction.details.bonusinstallments","transaction.details.VR":"transaction.details.cardcategory","transaction.details.LMT":"transaction.details.cardlimitrange","transaction.details.BD":"transaction.details.cardnetwork","transaction.details.PT":"transaction.details.cardpartner","transaction.details.DCP":"transaction.details.cardpurchaselimitrange","transaction.details.DEF":"transaction.details.cardwithdrawallimitrange","transaction.details.CAN":"transaction.details.chosenchannel","transaction.details.PTS":"transaction.details.clientrewardsvaluerange","transaction.details.CUR":"transaction.details.currency","transaction.details.ACR":"transaction.details.daystoinvoiceclosure","transaction.details.TCD":"transaction.details.destinationaccounttype","transaction.details.BCD":"transaction.details.destinationbank","transaction.details.PLZ":"transaction.details.installmentsterm","transaction.details.CT":"transaction.details.installmentsterm","transaction.details.LMP":"transaction.details.loanlimitrange","transaction.details.PAO":"transaction.details.offeredlimitincreaserange","transaction.details.TCO":"transaction.details.originaccounttype","transaction.details.MDP":"transaction.details.paymentmethod","transaction.details.CAT":"transaction.details.productcategory","transaction.details.DP":"transaction.details.productdetails","transaction.details.PAS":"transaction.details.requestedlimitincreaserange","transaction.details.TS":"transaction.details.tax","transaction.details.INST":"transaction.details.transactioninstitution","transaction.details.STS":"transaction.details.transactionstatus","transaction.details.PVJ":"transaction.details.travelnoticedestinationcountry","transaction.details.FVI":"transaction.details.travelnoticeinbounddate","transaction.details.FVR":"transaction.details.travelnoticeoutbounddate","custom.partnerid":"custom.confirmationid","custom.internalid":"custom.leadid","custom.logintype.TA":"custom.login.authenticationtype","custom.logintype.TL":"custom.login.type","custom.surveyscore.RE":"custom.survey.results","custom.surveyscore.TG":"custom.survey.tag","custom.surveyscore.TP":"custom.survey.type","custom.whatevervariable.MSG":"custom.message"},init=function(t){try{"object"==typeof t&&(void 0===t.adobeDataLayerName||(adobeDataLayerName=t.adobeDataLayerName),void 0===t.debug||(debug=t.debug),void 0===t.debugColor||(debugColor=t.debugColor),void 0===t.gtmContainerId||(gtmContainerId=t.gtmContainerId),void 0===t.autoTrackState||(autoTrackState=t.autoTrackState)),function(t,a,e,i,s){t[i]=t[i]||[],t[i].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var o=a.getElementsByTagName(e)[0],r=a.createElement(e);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id="+s,o.parentNode.insertBefore(r,o)}(window,document,"script","dataLayer",gtmContainerId),w[adobeDataLayerName]=w[adobeDataLayerName]||{},w.dataLayer=w.dataLayer||[],autoTrackState&&trackState()}catch(t){debug&&console.log("%cAnalytics - init - Error",debugColor,t)}setTimeout(function(){try{delete w.analyticsLib.init}catch(t){}},0)},trackState=function(t,a){try{t&&setData("page.name",t),a&&setData("custom",a),w[adobeDataLayerName].page&&w[adobeDataLayerName].page.url||setData("page.url",document.location.href),setData("rule","pageLoad"),dataLayerParser(),debug&&(console.log("%cAnalytics - trackState - pageName: ",debugColor,w[adobeDataLayerName].page.name),console.log("%cAnalytics - trackState - pageUrl: ",debugColor,w[adobeDataLayerName].page.url),console.log("%cAnalytics - trackState - custom: ",debugColor,w[adobeDataLayerName].custom)),w.google_tag_manager&&w.google_tag_manager[gtmContainerId].dataLayer.reset(),w.dataLayer.push({event:"async_content_load",analyticsData:JSON.parse(JSON.stringify(w[adobeDataLayerName]))}),setData("transaction",{}),setData("custom",{}),setData("ecommerce",{})}catch(t){debug&&console.log("%cAnalytics - trackState - Error",debugColor,t)}},trackAction=function(t){try{t&&setData("custom",t),setData("rule","customLink"),dataLayerParser(),debug&&console.log("%cAnalytics - trackAction: ",debugColor,w[adobeDataLayerName].custom);var a=w[adobeDataLayerName].custom.componentclicked||w[adobeDataLayerName].custom.ComponentClicked||w[adobeDataLayerName].custom.actioninfo;a&&(w[adobeDataLayerName].custom.customCategory=a.match(/(MO:+)([^|]*)/)[2]+"|"+a.match(/(TP:+)([^|]*)/)[2]+"|"+a.match(/(PO:+)([^|]*)/)[2],w[adobeDataLayerName].custom.customAction=a.match(/(AC:+)([^|]*)/)[2],w[adobeDataLayerName].custom.customLabel=a.match(/(ID:+)([^|]*)/)[2]),!t.hasOwnProperty("noninteractionhit")&&isNonInteractionHit(t.customAction)&&setData("custom.events.noninteractionhit",1),w.google_tag_manager&&w.google_tag_manager[gtmContainerId].dataLayer.reset(),w.dataLayer.push({event:"async_content_load",analyticsData:JSON.parse(JSON.stringify(w[adobeDataLayerName]))}),setData("transaction",{}),setData("custom",{}),setData("ecommerce",{})}catch(t){debug&&console.log("%cAnalytics - trackAction - Error",debugColor,t)}},isNonInteractionHit=function(t){try{return-1!==["Show"].indexOf(t)}catch(t){debug&&console.log("%cAnalytics - isNonInteractionHit - Error",debugColor,t)}},getTimeStamp=function(){try{var t=new Date,a=-t.getTimezoneOffset(),e=0<=a?"+":"-",i=function(t){var a=Math.abs(Math.floor(t));return(a<10?"0":"")+a};return t.getFullYear()+"-"+i(t.getMonth()+1)+"-"+i(t.getDate())+"T"+i(t.getHours())+":"+i(t.getMinutes())+":"+i(t.getSeconds())+"."+i(t.getMilliseconds())+e+i(a/60)+":"+i(a%60)}catch(t){debug&&console.log("%cAnalytics - getTimeStamp - Error",debugColor,t)}};function hasProp(t,a,e){try{return void 0!==e||(e=0)||(a=a.split(".")),void 0!==t[a[e]]&&(!++e||e===a.length||hasProp(t[a[e-1]],a,e))}catch(t){debug&&console.log("%cAnalytics - hasProp - Error",debugColor,t)}}var dataLayerParser=function(){try{var events=w[adobeDataLayerName].custom?w[adobeDataLayerName].custom.events:void 0;if(events&&0<events.length){for(var objEvents={},eventsLength=events.length,i=0;i<eventsLength;i++)objEvents[events[i].split("=")[0]]=events[i].split("=")[1]||"1";w[adobeDataLayerName].custom.events=objEvents}}catch(t){debug&&console.log("Ocorreu um erro na conversão dos Eventos: "+t)}try{for(var classificationValue,listClassificationLength=listClassification.length,itemsClassification,itemsClassificationLength,classPairArr,i=0;i<listClassificationLength;i++){try{classificationValue=eval(adobeDataLayerName+"."+listClassification[i]).replace(/(^\|)|(\|$)/g,"")}catch(t){}if(classificationValue){setData(listClassification[i],{}),itemsClassification=classificationValue.split("|"),itemsClassificationLength=itemsClassification.length;for(var ii=0;ii<itemsClassificationLength;ii++)classPairArr=itemsClassification[ii].split(":"),adobeToGoole[listClassification[i]+"."+classPairArr[0]]&&setData(adobeToGoole[listClassification[i]+"."+classPairArr[0]],classPairArr[1])}classificationValue=void 0}}catch(t){debug&&console.log("Ocorreu um erro ao converter as dimensões antigas com classifications: "+t)}for(var prop in adobeToGoole)try{adobeToGoole.hasOwnProperty(prop)&&eval(adobeDataLayerName+"."+prop)&&setData(adobeToGoole[prop],eval(adobeDataLayerName+"."+prop))}catch(t){}if(hasProp(w[adobeDataLayerName],"custom.surveyresponse"))try{setData("custom.survey.feedbackname",w[adobeDataLayerName].custom.surveyresponse.match(/(NM:+)([^|]*)/)[2]),setData("custom.survey.questionsandanswers",w[adobeDataLayerName].custom.surveyresponse.match(/(Q([^;]*):+)([^|]*)/)[0])}catch(t){debug&&console.log("Ocorreu um erro na conversão de Survey Response: "+t)}hasProp(w[adobeDataLayerName],"custom.hittimestamp")||setData("custom.hittimestamp",getTimeStamp()),hasProp(w[adobeDataLayerName],"site.gtmcontainerid")||setData("site.gtmcontainerid",gtmContainerId),hasProp(w[adobeDataLayerName],"visitor.sessionid")||setData("visitor.sessionid",Date.now()+parseInt(1e8*Math.random()))},setData=function(t,a){var e,i=w[adobeDataLayerName],s=t.split(".");try{if(t===adobeDataLayerName)return w[adobeDataLayerName]=a,debug&&console.log("%cAnalytics - setData: ",debugColor,adobeDataLayerName+" = "+JSON.stringify(a)),!0;for(e=0;e<s.length-1;e++)null==i[s[e]]&&(i[s[e]]={}),i=i[s[e]];i[s[e]]=a,debug&&console.log("%cAnalytics - setData: ",debugColor,adobeDataLayerName+"."+t+" = "+JSON.stringify(i[s[e]]))}catch(t){debug&&console.log("%cAnalytics - setData - Error",debugColor,t)}};return{init:init,trackState:trackState,trackAction:trackAction,setData:setData,adobeDataLayerName:adobeDataLayerName}}(window);